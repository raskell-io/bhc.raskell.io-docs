{% extends "base.html" %}

{% block title %}{{ page.title }} | {{ config.title }}{% endblock %}

{% block sidebar %}
{% include "partials/sidebar.html" %}
{% endblock %}

{% block content %}
<article class="article" itemscope itemtype="https://schema.org/Article">
    <header class="article__header">
        <div class="article__label">[ DOCUMENTATION ]</div>
        <h1 id="article-title" itemprop="headline">{{ page.title }}</h1>
        {% if page.description %}
        <p class="article__description" itemprop="description">{{ page.description }}</p>
        {% endif %}
    </header>

    <div class="article__content" itemprop="articleBody">
        {{ page.content | safe }}
    </div>

    {# Hidden metadata for structured data #}
    {% if config.extra.author %}
    <meta itemprop="author" content="{{ config.extra.author }}">
    {% endif %}
    {% if page.updated %}
    <meta itemprop="dateModified" content="{{ page.updated | date(format='%Y-%m-%d') }}">
    {% endif %}
</article>

{# Page navigation #}
<nav class="page-nav" aria-label="Page navigation">
    {% if page.earlier %}
    <a href="{{ page.earlier.permalink | safe }}" class="page-nav__link page-nav__link--prev" rel="prev">
        <span class="page-nav__arrow">&larr;</span>
        <span class="page-nav__meta">
            <span class="page-nav__label">Previous</span>
            <span class="page-nav__title">{{ page.earlier.title }}</span>
        </span>
    </a>
    {% else %}
    <div class="page-nav__link page-nav__link--empty"></div>
    {% endif %}

    {% if page.later %}
    <a href="{{ page.later.permalink | safe }}" class="page-nav__link page-nav__link--next" rel="next">
        <span class="page-nav__meta">
            <span class="page-nav__label">Next</span>
            <span class="page-nav__title">{{ page.later.title }}</span>
        </span>
        <span class="page-nav__arrow">&rarr;</span>
    </a>
    {% else %}
    <div class="page-nav__link page-nav__link--empty"></div>
    {% endif %}
</nav>

{# On this page (right side TOC for desktop) #}
{% if page.toc %}
<aside class="page-toc" aria-label="On this page">
    <div class="page-toc__label">[ ON THIS PAGE ]</div>
    <nav class="page-toc__nav">
        {% for item in page.toc %}
        <a href="#{{ item.id }}" class="page-toc__link">{{ item.title }}</a>
        {% if item.children %}
        {% for child in item.children %}
        <a href="#{{ child.id }}" class="page-toc__link page-toc__link--nested">{{ child.title }}</a>
        {% endfor %}
        {% endif %}
        {% endfor %}
    </nav>
</aside>
{% endif %}
{% endblock %}
